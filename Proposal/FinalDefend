#include <HCSR04.h>
HCSR04 hc(9,10);
HCSR04 hc2(11,12); //initialisation class HCSR04 (trig,echo);
#define ia1 1
#define ia2 2
#define ib1 3
#define ib2 4 
#define ic1 5 
#define ic2 6 
#define id1 7 
#define id2 8 
#define S2 13
#define S3 0
#define SBt A0 
#define maxSpd 255    // motor max speed


void setup() {
  pinMode(ia1, OUTPUT);
  pinMode(ia2, OUTPUT);
  pinMode(ib1, OUTPUT);
  pinMode(ib2, OUTPUT);
  pinMode(ic1, OUTPUT);
  pinMode(ic2, OUTPUT);
  pinMode(id1, OUTPUT);
  pinMode(id2, OUTPUT);
  pinMode(S2,INPUT);
  pinMode(S3,INPUT);
  pinMode(SBt,INPUT);
  Serial.begin(9600);
 
}
void loop() {
  int speed = maxSpd;
   Sensor1();
   Sensor4();
  
}
void Sensor1() //ultrasonic
{
   int speed = maxSpd;
  Serial.println(hc2.dist() ); //showdistantfromfront
    if((hc2.dist()>=0) && (hc2.dist()<=15)){
       Forward(speed);}
    else{
        Break();}
}
void Sensor4() //ultrasonic
{
   int speed = maxSpd;
  Serial.println(hc2.dist() ); //showdistantfromfront
    if((hc2.dist()>=0) && (hc2.dist()<=15)){
       Reward(speed);}
    else{
        Break();}
}
void Break() // motor break
{
  digitalWrite(ia1, HIGH);   
  digitalWrite(ia2, HIGH);  
  digitalWrite(ib1, HIGH);   
  digitalWrite(ib2, HIGH); 
  digitalWrite(ic1, HIGH);   
  digitalWrite(ic2, HIGH);   
  digitalWrite(id1, HIGH);   
  digitalWrite(id2, HIGH);  
}
void Forward(int speed) //goforward
{
  digitalWrite(ia1, LOW);   
  analogWrite(ia2, speed);   
  digitalWrite(ib1, LOW);   
  analogWrite(ib2, speed); 
  digitalWrite(ic1, LOW);   
  analogWrite(ic2, speed); 
  digitalWrite(id1, LOW);   
  analogWrite(id2, speed); 
  
}
void Reward(int speed) //goReward
{
  digitalWrite(ia2, LOW);   
  analogWrite(ia1, speed);   
  digitalWrite(ib2, LOW);   
  analogWrite(ib1, speed);  
  digitalWrite(ic2, LOW);   
  analogWrite(ic1, speed);  
  digitalWrite(id2, LOW);   
  analogWrite(id1, speed);  
}
